# 서버와 로컬 환경 차이 원인 분석

## 주요 원인

### 1. **React StrictMode (개발 모드)**
- **로컬**: `React.StrictMode`가 활성화되어 `useEffect`가 **두 번 실행**됨
- **서버**: 프로덕션 빌드에서는 StrictMode가 비활성화되어 한 번만 실행
- **영향**: 애니메이션 초기화 타이밍이 달라질 수 있음

### 2. **Framer Motion 애니메이션 타이밍**
- **로컬**: 개발 모드에서 애니메이션이 즉시 적용
- **서버**: 프로덕션 빌드에서 코드 최적화로 인해 애니메이션 타이밍이 달라질 수 있음
- **영향**: `controls.start()`가 비동기로 실행되어 타이밍 문제 발생 가능

### 3. **Hydration 이슈**
- **서버**: 빌드된 정적 파일이 먼저 렌더링되고, 이후 JavaScript가 로드되면서 hydration 발생
- **로컬**: 개발 모드에서는 즉시 JavaScript가 실행
- **영향**: 초기 렌더링 시 opacity가 0으로 시작할 수 있음

### 4. **브라우저 환경 차이**
- **Intersection Observer**: `whileInView`는 뷰포트 진입 시 트리거되는데, 서버 환경에서는 이미 뷰포트에 있어서 트리거되지 않을 수 있음
- **애니메이션 최적화**: 브라우저가 애니메이션을 최적화하면서 일부 프레임이 스킵될 수 있음

## 해결 방법

### 적용된 수정 사항

1. **`whileInView` 제거**: 서버 환경에서 불안정하므로 제거
2. **`initial={{ opacity: 1 }}`**: 처음부터 보이도록 설정
3. **`controls.set()` + `controls.start()`**: 즉시 설정 후 애니메이션 적용
4. **`isMounted` 상태**: 클라이언트 사이드에서만 애니메이션 활성화
5. **`await` 사용**: 비동기 애니메이션이 완료될 때까지 대기

### 추가 권장 사항

1. **React StrictMode 제거** (프로덕션 빌드에서는 자동 비활성화)
2. **애니메이션 지연 최소화**: `transition: { duration: 0.2 }`로 빠른 전환
3. **명시적 opacity 설정**: 모든 상태 변경 시 opacity를 명시적으로 설정
